<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 
  Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:component xmlns="http://www.w3.org/1999/xhtml"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:a4j="http://richfaces.org/a4j"
   xmlns:rich="http://richfaces.org/rich"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:link="http://www.link.it"
   xmlns:c="http://java.sun.com/jstl/core">
 <c:if test="#{empty rendered}">
 	<c:set var="rendered" value="true"/>
 </c:if>
 <c:if test="#{empty closed}">
 	<c:set var="closed" value="false"/>
 </c:if>
 <c:if test="#{empty collapsible}">
 	<c:set var="collapsible" value="true"/>
 </c:if>
 <a4j:outputPanel layout="block" rendered="#{rendered}">
	 <fieldset class="#{collapsible ? (closed ? 'collapsibleClosed' : 'collapsible')  : ''}">
		<legend>#{legend}</legend>
		<c:if test="#{rendered}">		
			<ui:insert/>
		</c:if>
	</fieldset>
	<rich:jQuery timing="immediate" selector="fieldset.collapsible" query="collapse()"/>
	<rich:jQuery timing="immediate" selector="fieldset.collapsibleClosed" query="collapse({closed: true})"/>
 </a4j:outputPanel>
</ui:component>